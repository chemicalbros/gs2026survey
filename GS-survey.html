<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Priorities Survey</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for better aesthetics */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Ensure number inputs show spinners */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- CHANGED max-w-lg to max-w-5xl for more width to accommodate side-by-side layout -->
    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg w-full max-w-5xl">

        <h1 class="text-2xl font-bold text-gray-800 mb-6 text-center">APW 2026 Growth & Strategy: Priorities</h1>

        <!-- Flex container for side-by-side layout -->
        <div class="flex flex-col lg:flex-row gap-6">

            <!-- Left side: Survey content -->
            <div class="flex-1">
        
        <!-- Name Question - Now REQUIRED --><div class="mb-6">
            <label for="name-input" class="block text-md font-semibold text-gray-700 mb-2">
                What is your name? <span class="text-red-500">*</span>
            </label>
            <input type="text" id="name-input" name="name" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Jane Doe" required>
        </div>
        
        <!-- The Constant Sum Question --><div class="mb-6">
            <label class="block text-md font-semibold text-gray-700 mb-3">
                100 points represents the total resources available (funding, hours, tools, etc.) for 2026. How would you allocate these points among the following categories?
            </label>
            <p class="text-sm text-gray-500 mb-4">NOTE: this point allocation should reflect what within APW merits our strategic focus and allocation of resources at this point in time, not what is theoretically important or is valuable for our/an organization. For example, if you think that staff engagement and development is of high value to our organization but it is well developed and currently does not require much strategic focus/prioritization, this item would receive a lower point allocation.</p>
            
            <div id="survey-form" class="space-y-4">
                
                <!-- Priority 1: Networking & relationship building - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="networking" name="networking" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="networking" class="text-gray-900 font-bold">Networking & relationship building</label>
                        <p class="text-sm italic text-gray-600 mt-1">E.g. agencies, cultural exchange, int. education; Attending conferences, building relationships with key stakeholders/higher ups</p>
                    </div>
                </div>
                
                <!-- Priority 2: Marketing & awareness - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="marketing" name="marketing" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="marketing" class="text-gray-900 font-bold">Marketing & awareness</label>
                        <p class="text-sm italic text-gray-600 mt-1">Includes networking/marketing collaborations with staff of organizations that aren't key stakeholders (i.e. LCCs, marketing collaborations with Cultural Care Spain)</p>
                    </div>
                </div>
                
                <!-- Priority 3: Maintaining city infrastructure - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="infrastructure" name="infrastructure" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="infrastructure" class="text-gray-900 font-bold">Maintaining city infrastructure</label>
                        <p class="text-sm italic text-gray-600 mt-1">Keeping city staff employed; maintaining relationships with our academic partners and community partners</p>
                    </div>
                </div>
                
                <!-- Priority 4: In-person course offerings - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="in_person_courses" name="in_person_courses" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="in_person_courses" class="text-gray-900 font-bold">In-person course offerings</label>
                        <p class="text-sm italic text-gray-600 mt-1">New and/or modified for-credit courses. Adding new programming for educational credit to additional cities or current cities; or modifying already existing curriculum in our cities. Following same general model we currently have. Examples: LA Creativity and Wellness; opening up a new city; creating a new curriculum.</p>
                    </div>
                </div>
                
                <!-- Priority 5: Staff engagement & development - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="staff_engagement" name="staff_engagement" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="staff_engagement" class="text-gray-900 font-bold">Staff engagement & development</label>
                        <p class="text-sm italic text-gray-600 mt-1">Recruiting, training, and retaining an engaged workforce that have opportunities for professional development and growth within APW. Succession planning and leadership development/pipeline.</p>
                    </div>
                </div>
                
                <!-- Priority 6: Additional revenue streams - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="revenue_streams" name="revenue_streams" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="revenue_streams" class="text-gray-900 font-bold">Additional revenue streams</label>
                        <p class="text-sm italic text-gray-600 mt-1">Any source of revenue that differs from our current sources of revenue, which are the welcome tour & educational classes for credit for APs. This includes new domestic cultural exchange models (even if they include APs getting ed credits as one of our customers), and not for credits add ons/courses (because while they involve APs, they would be paying for a service that does not include receiving educational credits).</p>
                    </div>
                </div>

                <!-- Priority 7: Online course offerings - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="online_courses" name="online_courses" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="online_courses" class="text-gray-900 font-bold">Online course offerings</label>
                        <p class="text-sm italic text-gray-600 mt-1">New and/or modified for-credit courses. Could also include incorporating a new delivery method (LMS, synchronous platform, etc).</p>
                    </div>
                </div>

                <!-- Priority 8: Operational efficiencies - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="operational_efficiencies" name="operational_efficiencies" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="operational_efficiencies" class="text-gray-900 font-bold">Operational efficiencies</label>
                        <p class="text-sm italic text-gray-600 mt-1">Broad bucket! Anything that helps the organization run more efficiently, from both a systems and a people perspective. Examples: automation, streamline tech, reduce repetitive/inefficient labor by ensuring efforts across all roles are connected to clear and focused org priorities.</p>
                    </div>
                </div>

                <!-- Priority 9: Welcome tour - WIDTHS ADJUSTED --><div class="flex items-start justify-between space-x-4">
                    <input type="number" id="welcome_tour" name="welcome_tour" min="0" max="100" value="0" class="survey-input w-1/4 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div class="w-3/4">
                        <label for="welcome_tour" class="text-gray-900 font-bold">Welcome tour</label>
                        <p class="text-sm italic text-gray-600 mt-1">Additional/expanded current partnerships</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Validation and Total Display --><div class="mb-6 p-4 bg-gray-50 rounded-lg">
            <div class="flex justify-between items-center">
                <span class="text-lg font-bold text-gray-800">Total Points:</span>
                <span id="total-points" class="text-lg font-bold text-gray-800">0</span>
            </div>
            <div id="validation-message" class="text-center mt-2 text-sm font-medium"></div>
        </div>
        
        <!-- Submit Button --><button id="submit-btn" type="button" class="w-full bg-blue-600 text-white py-3 px-4 rounded-md font-semibold shadow-md transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" disabled>
            Submit
        </button>

        <!-- Success Message - TEXT UPDATED --><div id="success-message" class="hidden mt-4 p-4 bg-green-100 text-green-700 border border-green-300 rounded-md text-center">
            Thank you!
        </div>
            </div>
            <!-- End of left side -->

            <!-- Right side: Introductory section -->
            <div class="lg:w-80 flex-shrink-0">
                <header class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                    <p class="text-md font-semibold text-gray-700 mb-3">As you do this exercise, consider the following priorities:</p>
                    <ul class="list-disc list-inside text-sm text-gray-700 ml-4 space-y-1">
                        <li>Increase growth and profitability</li>
                        <li>Happy and engaged staff</li>
                        <li>Satisfied customers and community partners</li>
                        <li>Strengthen the global community</li>
                        <li>Facilitate transformative educational experiences</li>
                        <li>Connect people, transform lives, cultivate personal development</li>
                        <li>Operational efficiency</li>
                    </ul>
                </header>
            </div>
            <!-- End of right side -->

        </div>
        <!-- End of flex container -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const inputs = document.querySelectorAll('.survey-input');
            const nameInput = document.getElementById('name-input');
            const totalPointsEl = document.getElementById('total-points');
            const validationMessageEl = document.getElementById('validation-message');
            const submitBtn = document.getElementById('submit-btn');
            const successMessage = document.getElementById('success-message');
            const surveyForm = document.getElementById('survey-form');

            const validateAllInputs = () => {
                // 1. Calculate Constant Sum Total
                let total = 0;
                inputs.forEach(input => {
                    // Ensure we treat empty strings as 0
                    const value = parseInt(input.value, 10) || 0;
                    // Ensure non-negative values
                    if (value < 0) {
                        input.value = 0;
                    }
                    total += value;
                });

                totalPointsEl.textContent = total;

                // 2. Check Name Requirement
                const isNameValid = nameInput.value.trim().length > 0;
                const isSumValid = total === 100;

                // 3. Update Constant Sum Validation Message (and color total)
                if (isSumValid) {
                    validationMessageEl.textContent = 'TOTAL: 100!';
                    validationMessageEl.className = 'text-center mt-2 text-sm font-medium text-green-600';
                    totalPointsEl.className = 'text-lg font-bold text-green-600';
                } else if (total > 100) {
                    validationMessageEl.textContent = `TOTAL: ${total}. Please reduce by ${total - 100}.`;
                    validationMessageEl.className = 'text-center mt-2 text-sm font-medium text-red-600';
                    totalPointsEl.className = 'text-lg font-bold text-red-600';
                } else {
                    validationMessageEl.textContent = `TOTAL: ${total}. Please add ${100 - total} more.`;
                    validationMessageEl.className = 'text-center mt-2 text-sm font-medium text-red-600';
                    totalPointsEl.className = 'text-lg font-bold text-red-600';
                }

                // 4. Update Submit Button state
                if (isNameValid && isSumValid) {
                    submitBtn.disabled = false;
                } else {
                    submitBtn.disabled = true;
                    // If the sum is correct but the name is missing, override the message to prompt for name
                    if (isSumValid && !isNameValid) {
                        validationMessageEl.textContent = 'Please enter your name to submit.';
                        validationMessageEl.className = 'text-center mt-2 text-sm font-medium text-red-600';
                    }
                }
            };

            // Add event listeners to trigger validation on any input change
            inputs.forEach(input => {
                input.addEventListener('input', validateAllInputs);
            });
            nameInput.addEventListener('input', validateAllInputs); // Listen to name input too!
            
            // Handle form submission
            submitBtn.addEventListener('click', () => {
                // *** 1. PASTE YOUR GOOGLE SCRIPT URL HERE ***
                const scriptURL = 'https://script.google.com/macros/s/AKfycbyjKsKXMIACjbHc5Mql_z1RnAXW1qnadueLQtXg2RAAx1Y_wGgsISavutYKCVlmITBy/exec';

                // Get the name value
                const name = nameInput.value.trim() || 'Not provided';
                
                // Construct the data object
                const formData = {
                    name: name
                };
                inputs.forEach(input => {
                    formData[input.name] = parseInt(input.value, 10) || 0;
                });
                
                // Disable button and show "Submitting..."
                submitBtn.disabled = true;
                submitBtn.textContent = 'Submitting...';

                // Send data to Google Apps Script
                fetch(scriptURL, {
                    method: 'POST',
                    mode: 'cors', // 'cors' is needed for cross-domain requests
                    headers: {
                        // Apps Script web apps often prefer text/plain
                        'Content-Type': 'text/plain;charset=utf-8', 
                    },
                    body: JSON.stringify(formData)
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    // Hide the form and button, show success
                    document.querySelector('header').classList.add('hidden'); // Hide introductory header
                    document.querySelector('h1').classList.add('hidden'); // Hide main title
                    nameInput.parentElement.classList.add('hidden'); // Hide name question div
                    
                    // Hides the entire constant sum question block (instructions and inputs)
                    surveyForm.parentElement.classList.add('hidden'); 

                    submitBtn.classList.add('hidden');
                    validationMessageEl.classList.add('hidden');
                    document.querySelector('.bg-gray-50').classList.add('hidden'); // Hide total box
                    
                    successMessage.classList.remove('hidden');
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    // Show an error to the user
                    validationMessageEl.textContent = 'Error: Could not submit. Please check your script URL and connection.';
                    validationMessageEl.className = 'text-center mt-2 text-sm font-medium text-red-600';
                    
                    // Re-enable the button
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Submit';
                });
            });

            // Initial check on load
            validateAllInputs();
        });
    </script>

</body>
</html>
